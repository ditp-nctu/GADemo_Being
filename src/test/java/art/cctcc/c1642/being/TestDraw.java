/*
 * Copyright 2021 Jonathan Chang, Chun-yien <ccy@musicapoetica.org>.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package art.cctcc.c1642.being;

import java.util.Arrays;
import static java.util.function.Predicate.not;
import processing.core.PApplet;

/**
 *
 * @author Jonathan Chang, Chun-yien <ccy@musicapoetica.org>
 */
public class TestDraw extends PApplet {

  public static void main(String[] args) {
    System.setProperty("sun.java2d.uiScale", "1.0");
    PApplet.main(TestDraw.class);
  }

  @Override
  public void settings() {
    fullScreen();
  }

  @Override
  public void setup() {
    noLoop();
    noFill();
    background(0);
    stroke(255);
    rectMode(CENTER);
  }

  @Override
  public void draw() {
//               55.157   82  39 {1, 2, 2, 1, 1, 2, 1, 1, 2, 2, 1, 1, 3, 2, 1, 1, 1, 3, 3, 2, 2, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 1, 3, 2, 4, 1, 1, 1, 9}
//               54.914   87  39 {2, 1, 1, 1, 1, 3, 1, 1, 1, 3, 2, 1, 2, 1, 2, 2, 2, 3, 2, 1, 1, 3, 2, 2, 3, 1, 1, 1, 3, 1, 1, 3, 1, 3, 2, 2, 5, 1, 5}
//               55.840   92  40 {1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 2, 2, 2, 1, 2, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 2, 1, 3, 2, 1, 2, 3, 3, 4, 1, 2, 5, 5, 4}
//               55.813   95  40 {1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 2, 1, 2, 2, 1, 1, 1, 3, 1, 2, 1, 2, 2, 3, 2, 2, 1, 2, 3, 1, 3, 1, 2, 6, 2, 3, 2, 1}
//               54.429   96  39 {2, 1, 1, 1, 1, 2, 2, 1, 2, 2, 2, 3, 1, 1, 1, 1, 3, 1, 2, 3, 1, 1, 1, 2, 3, 2, 1, 4, 2, 1, 2, 3, 3, 1, 3, 4, 5, 1, 10}
//               56.043   98  40 {1, 2, 2, 2, 1, 3, 2, 3, 3, 2, 2, 3, 1, 3, 3, 2, 3, 2, 1, 2, 2, 3, 3, 2, 1, 1, 2, 1, 1, 1, 2, 4, 1, 1, 3, 5, 1, 1, 2}
//               55.946   99  40 {2, 1, 3, 2, 1, 2, 2, 3, 3, 1, 2, 3, 2, 2, 1, 2, 2, 1, 2, 2, 2, 1, 1, 3, 2, 1, 4, 1, 2, 3, 2, 1, 3, 2, 2, 3, 1, 1, 5}
//               54.424  101  39 {1, 3, 2, 1, 1, 1, 2, 2, 3, 2, 2, 3, 2, 3, 2, 1, 1, 3, 1, 3, 2, 1, 2, 1, 3, 4, 2, 4, 1, 3, 1, 1, 1, 3, 4, 1, 6, 5, 8}
    var infos = """
               55.248  104  40 {1, 1, 0, 1, 1, 2, 2, 2, 1, 1, 2, 2, 2, 1, 2, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 2, 1, 3, 2, 1, 2, 3, 3, 4, 1, 2, 5, 5, 4}
               """.split("\n");
//               54.392  106  39 {1, 3, 2, 1, 2, 1, 3, 3, 2, 3, 2, 3, 2, 2, 2, 3, 2, 2, 1, 2, 4, 1, 2, 2, 4, 1, 1, 2, 2, 2, 4, 1, 2, 3, 6, 6, 2, 2, 8}
//               54.965  109  40 {1, 0, 1, 1, 1, 1, 1, 2, 1, 1, 1, 3, 1, 2, 1, 3, 1, 1, 1, 2, 1, 1, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2, 4, 3}
//               55.478  110  40 {2, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 3, 3, 4, 3, 2, 2, 3, 3, 3, 2, 3, 4, 4, 3, 1, 2, 3, 4, 2, 3, 2, 3, 2, 5, 6, 1, 1}
//               55.439  112  40 {1, 3, 3, 1, 2, 3, 2, 1, 2, 2, 1, 4, 3, 2, 2, 2, 1, 3, 1, 1, 1, 1, 4, 3, 3, 4, 2, 4, 2, 3, 2, 4, 3, 5, 4, 2, 1, 4, 2}
//               55.419  115  40 {2, 2, 2, 3, 2, 1, 2, 3, 4, 3, 1, 1, 1, 2, 2, 2, 3, 1, 2, 3, 1, 1, 2, 1, 1, 1, 4, 5, 3, 5, 5, 3, 6, 2, 3, 2, 3, 2, 4}
//               55.581  116  40 {2, 5, 1, 2, 2, 2, 1, 1, 2, 1, 2, 2, 3, 4, 2, 2, 6, 2, 1, 5, 2, 5, 6, 2, 5, 6, 1, 2, 1, 2, 2, 1, 1, 2, 3, 0, 4, 1, 2}
//               55.197  121  40 {1, 2, 2, 2, 1, 2, 1, 4, 2, 1, 1, 1, 4, 2, 3, 2, 1, 1, 4, 2, 4, 2, 4, 1, 3, 1, 1, 2, 3, 1, 6, 6, 5, 3, 5, 3, 4, 3, 8}
//               55.036  123  40 {2, 1, 3, 3, 1, 1, 1, 4, 2, 1, 2, 4, 1, 3, 1, 2, 1, 3, 2, 2, 4, 2, 3, 5, 1, 1, 5, 2, 2, 5, 2, 2, 1, 6, 4, 3, 1, 9, 2}
//               55.168  125  40 {1, 1, 3, 4, 2, 1, 1, 3, 3, 3, 1, 2, 3, 4, 2, 1, 3, 4, 3, 3, 4, 1, 1, 4, 3, 1, 4, 3, 3, 1, 5, 3, 1, 1, 5, 4, 3, 9, 3}
//               55.072  126  40 {1, 3, 2, 1, 3, 3, 1, 1, 4, 2, 3, 2, 1, 3, 3, 2, 1, 1, 3, 2, 2, 5, 4, 3, 2, 2, 1, 2, 3, 3, 1, 2, 2, 6, 6, 5, 9, 4, 3}
//               55.230  128  40 {3, 3, 2, 3, 2, 3, 2, 3, 3, 2, 4, 4, 2, 2, 2, 3, 1, 1, 1, 3, 3, 1, 4, 4, 1, 1, 4, 1, 2, 3, 4, 2, 6, 6, 4, 2, 7, 1, 5}
//               54.704  132  40 {2, 4, 1, 1, 1, 2, 1, 1, 1, 1, 3, 1, 1, 2, 3, 1, 3, 1, 1, 4, 3, 2, 1, 2, 3, 2, 1, 2, 3, 3, 1, 1, 3, 4, 8, 1, 6, 10, 20}
//               54.988  134  40 {2, 4, 3, 3, 2, 3, 1, 3, 2, 3, 2, 1, 3, 2, 4, 1, 2, 2, 1, 3, 1, 2, 4, 3, 5, 3, 5, 5, 5, 2, 2, 6, 3, 1, 3, 1, 2, 11, 6}
//               54.894  136  40 {1, 2, 2, 3, 2, 3, 1, 2, 1, 3, 4, 2, 3, 4, 4, 1, 4, 2, 2, 2, 1, 2, 2, 3, 5, 4, 3, 1, 2, 3, 1, 2, 5, 1, 7, 4, 4, 1, 16}
//               54.731  137  40 {2, 1, 2, 3, 1, 2, 4, 4, 1, 2, 1, 1, 3, 1, 1, 1, 1, 3, 2, 5, 5, 5, 1, 1, 2, 3, 2, 6, 5, 2, 3, 6, 5, 1, 1, 7, 1, 6, 6}
//               54.739  139  40 {1, 2, 1, 1, 3, 4, 1, 1, 2, 2, 2, 2, 4, 3, 2, 4, 4, 1, 1, 3, 4, 4, 1, 2, 2, 3, 6, 4, 3, 1, 1, 6, 5, 6, 4, 7, 2, 3, 4}
//               54.608  140  40 {1, 1, 1, 2, 1, 1, 1, 4, 4, 4, 1, 2, 1, 4, 2, 1, 3, 1, 4, 5, 3, 2, 2, 3, 4, 2, 2, 1, 1, 2, 1, 3, 2, 10, 8, 7, 4, 13, 8}
//               54.789  141  40 {1, 2, 1, 1, 3, 4, 3, 4, 4, 2, 3, 1, 3, 2, 1, 5, 2, 1, 3, 3, 5, 2, 4, 5, 1, 2, 2, 4, 3, 5, 1, 6, 6, 1, 2, 2, 3, 11, 2}
//               54.895  142  40 {4, 4, 1, 2, 2, 4, 3, 4, 1, 4, 3, 1, 4, 4, 2, 2, 2, 3, 3, 2, 1, 3, 4, 1, 3, 5, 2, 5, 1, 3, 5, 1, 4, 6, 6, 3, 6, 6, 1}
//               54.699  143  40 {2, 3, 4, 2, 2, 3, 3, 1, 1, 3, 2, 3, 4, 5, 2, 1, 4, 4, 2, 1, 1, 3, 2, 2, 3, 1, 1, 1, 3, 1, 1, 3, 1, 3, 2, 1, 10, 12, 12}
//               54.768  144  40 {2, 4, 4, 3, 1, 1, 1, 3, 4, 2, 4, 4, 2, 2, 3, 1, 1, 4, 3, 4, 1, 4, 1, 4, 1, 1, 4, 6, 4, 4, 6, 6, 1, 7, 6, 3, 4, 8, 2}
//               54.739  148  40 {2, 5, 1, 3, 3, 4, 3, 4, 1, 4, 2, 2, 3, 4, 2, 2, 6, 2, 3, 2, 1, 3, 4, 1, 3, 5, 2, 3, 1, 2, 3, 2, 4, 4, 4, 2, 6, 10, 11}
//               54.854  149  40 {4, 4, 2, 1, 3, 4, 3, 4, 3, 4, 4, 4, 3, 1, 1, 3, 1, 6, 4, 3, 1, 3, 2, 2, 3, 2, 4, 3, 6, 7, 7, 4, 5, 6, 1, 4, 1, 2, 1}
//               54.521  150  40 {3, 2, 2, 2, 3, 3, 4, 4, 2, 1, 1, 2, 1, 3, 2, 1, 2, 1, 1, 5, 1, 2, 2, 2, 1, 6, 1, 6, 3, 3, 4, 2, 3, 6, 5, 7, 11, 4, 6}
//               54.537  153  40 {3, 2, 2, 2, 2, 4, 1, 2, 1, 3, 2, 5, 2, 3, 3, 2, 2, 3, 5, 2, 3, 6, 1, 2, 2, 3, 3, 4, 1, 5, 1, 7, 4, 9, 6, 6, 8, 2, 7}
//               54.521  154  40 {3, 2, 4, 2, 3, 4, 1, 2, 2, 3, 3, 1, 3, 2, 3, 3, 4, 1, 1, 1, 1, 1, 1, 5, 4, 2, 2, 6, 7, 1, 3, 4, 3, 9, 2, 7, 7, 8, 2}
//               54.647  155  40 {2, 2, 2, 3, 4, 2, 4, 1, 3, 5, 4, 1, 3, 1, 3, 4, 1, 2, 5, 4, 2, 4, 4, 1, 1, 5, 2, 1, 5, 5, 4, 4, 5, 6, 4, 1, 10, 5, 10}
//               54.627  156  40 {3, 4, 2, 3, 1, 1, 2, 3, 2, 5, 2, 1, 3, 4, 4, 1, 3, 2, 5, 5, 4, 1, 4, 5, 3, 5, 5, 5, 5, 6, 4, 3, 3, 2, 3, 8, 2, 4, 3}
//               54.417  158  40 {3, 1, 4, 1, 3, 3, 1, 2, 1, 1, 1, 3, 1, 3, 1, 5, 1, 2, 6, 1, 4, 4, 1, 4, 2, 2, 5, 5, 1, 4, 1, 3, 10, 9, 6, 4, 6, 2, 6}
//               54.450  159  40 {3, 4, 2, 3, 1, 3, 1, 3, 3, 1, 1, 3, 1, 4, 1, 2, 4, 4, 5, 4, 1, 3, 4, 4, 2, 5, 1, 2, 2, 7, 7, 5, 3, 4, 5, 1, 6, 7, 3}
//               54.430  160  40 {3, 3, 3, 1, 2, 3, 1, 2, 2, 1, 5, 3, 1, 4, 2, 5, 3, 3, 1, 4, 1, 2, 2, 6, 6, 3, 5, 6, 1, 1, 8, 8, 4, 8, 1, 8, 1, 11, 1}
//               54.324  161  40 {2, 1, 2, 1, 1, 4, 1, 1, 2, 3, 3, 1, 4, 2, 3, 2, 1, 5, 1, 6, 1, 6, 1, 1, 6, 3, 2, 2, 6, 4, 6, 2, 8, 8, 2, 2, 1, 15, 9}
//               54.540  162  40 {1, 4, 2, 1, 3, 2, 5, 5, 3, 4, 2, 5, 3, 1, 2, 5, 4, 1, 3, 1, 4, 2, 1, 3, 3, 6, 6, 1, 5, 3, 1, 2, 4, 4, 6, 2, 8, 2, 18}
//               54.325  163  40 {2, 4, 2, 1, 2, 1, 3, 1, 2, 1, 3, 2, 2, 3, 1, 5, 4, 5, 4, 1, 6, 5, 2, 1, 2, 7, 1, 6, 3, 2, 1, 7, 1, 7, 7, 11, 1, 10, 11}
//               54.480  164  40 {1, 2, 1, 3, 4, 1, 3, 3, 3, 2, 3, 3, 1, 3, 3, 3, 4, 4, 5, 3, 5, 5, 4, 4, 5, 2, 3, 1, 4, 5, 1, 2, 3, 4, 9, 7, 11, 7, 7}
//               54.525  165  40 {4, 4, 3, 5, 3, 2, 2, 1, 2, 1, 5, 4, 3, 1, 5, 1, 5, 4, 5, 3, 2, 1, 1, 2, 3, 2, 2, 4, 4, 6, 5, 4, 7, 8, 7, 1, 1, 7, 6}
//               54.361  166  40 {1, 1, 3, 4, 2, 2, 4, 4, 1, 1, 5, 2, 2, 1, 1, 3, 4, 4, 2, 2, 2, 5, 2, 5, 2, 1, 4, 3, 3, 2, 7, 9, 6, 5, 4, 3, 8, 1, 9}
//               54.480  167  40 {3, 1, 3, 3, 2, 4, 4, 1, 4, 3, 4, 1, 2, 2, 5, 4, 1, 3, 1, 4, 4, 5, 3, 5, 4, 2, 4, 3, 5, 7, 5, 2, 4, 2, 8, 6, 7, 5, 6}
//               54.463  169  40 {4, 1, 4, 3, 2, 5, 5, 1, 3, 2, 5, 4, 4, 3, 2, 2, 1, 5, 4, 1, 5, 2, 3, 1, 5, 6, 2, 2, 3, 7, 1, 1, 1, 2, 10, 3, 5, 11, 17}
//               54.278  172  40 {3, 1, 1, 1, 2, 2, 5, 2, 4, 4, 5, 2, 2, 2, 2, 3, 1, 4, 1, 3, 4, 3, 5, 5, 1, 6, 4, 5, 2, 4, 6, 7, 6, 8, 4, 1, 1, 11, 4}
//               54.355  173  40 {1, 4, 4, 4, 2, 4, 1, 1, 4, 3, 5, 2, 4, 3, 3, 1, 1, 5, 3, 2, 5, 2, 4, 2, 6, 3, 6, 6, 1, 7, 8, 1, 1, 6, 3, 7, 1, 9, 12}
//               54.343  174  40 {2, 2, 4, 5, 1, 1, 4, 3, 4, 3, 1, 3, 5, 5, 3, 1, 4, 5, 1, 5, 1, 4, 1, 4, 1, 6, 4, 4, 4, 4, 1, 2, 5, 10, 8, 2, 13, 2, 13}
//               54.436  175  40 {4, 4, 2, 1, 3, 4, 3, 2, 1, 5, 4, 3, 3, 6, 4, 3, 1, 6, 5, 2, 5, 1, 6, 2, 3, 2, 5, 3, 6, 7, 7, 4, 4, 3, 3, 8, 5, 6, 1}
//               54.364  177  40 {2, 4, 3, 1, 4, 3, 4, 3, 3, 3, 1, 5, 2, 1, 4, 4, 3, 5, 1, 5, 4, 3, 4, 1, 5, 6, 2, 3, 4, 2, 8, 1, 7, 6, 10, 3, 9, 8, 11}
//               54.295  178  40 {1, 3, 4, 2, 1, 1, 3, 1, 3, 3, 1, 1, 4, 4, 4, 5, 6, 3, 5, 5, 3, 3, 1, 1, 6, 1, 8, 1, 6, 6, 5, 7, 6, 1, 9, 7, 5, 10, 11}
//               54.306  179  40 {2, 3, 4, 1, 1, 4, 3, 5, 4, 1, 2, 2, 1, 5, 1, 1, 4, 5, 5, 3, 6, 4, 6, 6, 4, 4, 4, 1, 7, 8, 1, 2, 4, 1, 9, 10, 10, 12, 6}
//               54.282  180  40 {2, 5, 2, 1, 1, 5, 3, 5, 5, 2, 2, 2, 3, 4, 2, 2, 6, 2, 1, 5, 2, 5, 6, 2, 5, 6, 1, 6, 6, 5, 1, 7, 3, 1, 10, 8, 4, 1, 8}
//               54.340  182  40 {2, 5, 1, 4, 4, 1, 3, 2, 4, 2, 4, 5, 4, 4, 4, 5, 3, 2, 3, 5, 5, 5, 4, 6, 6, 2, 2, 3, 3, 8, 3, 7, 6, 5, 8, 4, 1, 4, 2}
//               54.264  183  40 {1, 4, 5, 4, 5, 1, 1, 3, 1, 2, 4, 2, 3, 4, 1, 1, 4, 2, 1, 4, 4, 6, 6, 7, 4, 7, 7, 2, 5, 5, 3, 5, 7, 8, 7, 3, 3, 1, 9}
//               54.281  185  40 {4, 1, 3, 4, 3, 2, 3, 3, 2, 5, 4, 3, 1, 3, 4, 5, 5, 5, 6, 4, 4, 1, 3, 2, 4, 2, 2, 3, 5, 3, 8, 4, 3, 7, 9, 1, 1, 1, 24}
//               54.881  253  40 {1, 6, 66, 65, 2, 2, 2, 17, 1, 1, 2, 2, 2, 1, 2, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 2, 1, 3, 2, 1, 2, 9, 7, 4, 1, 2, 5, 5, 4}
//               """.split("\n");
    Arrays.stream(infos)
            .filter(not(String::isEmpty))
            .forEach(line -> {
              var info = Arrays.stream(line.replaceAll("[{,}]", "").split(" "))
                      .filter(not(String::isEmpty))
                      .toList();
              var b = new Being((int) random(width), (int) random(height), 0, 0, 255, true);
              b.setSize(Integer.valueOf(info.get(1)));
              b.setDelta(info.stream().skip(3).mapToInt(Integer::valueOf).toArray());
              var ring = b.refreshRing();
              System.out.println("ring = " + ring);
              pushMatrix();
              translate(b.getX(), b.getY());
              var size = b.getSize();
              for (int j = 0; j < b.getRing() - 1; j++) {
                if (j % 2 == 0) {
                  circle(0, 0, size);
                } else {
                  rotate(PI / (float) (b.getDelta()[j - 1] + 1.0) * (b.isClockwise() ? 1 : -1));
                  rect(0, 0, size, size);
                }
                size -= b.getDelta()[j];
                System.out.println("size = " + size);
              }
              popMatrix();
            });
//    Assertions.assertEquals(40, b.getRing());
  }
}
